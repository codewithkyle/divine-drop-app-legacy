@page "/reset-password"
@inherits ResetPasswordBase;

<div class="block mx-auto w-full max-w-mobile">
    <div class="radius-0.5 p-2 bg-white shadow-md border-1 border-solid border-grey-300 block mb-1.5">
        <h1 class="font-medium block mb-1.5 font-lg text-center">Password Reset</h1>
        @if (ResetPasswordForm.ErrorMessage != null)
        {
            <p class="block font-danger-700 font-sm line-normal mb-1.5 text-center">@ResetPasswordForm.ErrorMessage</p>
        }
        @if (ResetPasswordForm.Success){
            <p class="block line-normal font-sm font-grey-700 text-center mb-1.5">Your password has been updated.</p>
            <div class="block w-full text-center">
                <a href="/" class="button -solid -primary -rounded">Login</a>
            </div>
        } else {
            <EditForm Model="@ResetPasswordForm" OnValidSubmit="@SubmitResetPasswordForm" grid="columns 1 gap-1.5" class="@(ResetPasswordForm.IsSubmitting ? "submitting" : "")">
                <DataAnnotationsValidator />
                <div class="input">
                    <label for="password">New Password</label>
                    <InputText type="password" id="password" @bind-Value="@ResetPasswordForm.Password" />
                    <ValidationMessage For="@(() => ResetPasswordForm.Password)" />
                </div>
                <button type="submit" class="button -solid -primary block w-full" disabled="@ResetPasswordForm.IsSubmitting">
                    <span class="@(ResetPasswordForm.IsSubmitting ? "hidden" : "")">Reset Password</span>
                    <i class="spinning-icon @(ResetPasswordForm.IsSubmitting ? "" : "hidden")">
                        <svg aria-hidden="true" focusable="false" role="img" xmlns="http://www.w3.org/2000/svg"
                            viewBox="0 0 512 512">
                            <g class="fa-group">
                                <path class="fa-secondary" fill="currentColor"
                                    d="M478.71 364.58zm-22 6.11l-27.83-15.9a15.92 15.92 0 0 1-6.94-19.2A184 184 0 1 1 256 72c5.89 0 11.71.29 17.46.83-.74-.07-1.48-.15-2.23-.21-8.49-.69-15.23-7.31-15.23-15.83v-32a16 16 0 0 1 15.34-16C266.24 8.46 261.18 8 256 8 119 8 8 119 8 256s111 248 248 248c98 0 182.42-56.95 222.71-139.42-4.13 7.86-14.23 10.55-22 6.11z"
                                    opacity="0.4"></path>
                                <path class="fa-primary" fill="currentColor"
                                    d="M271.23 72.62c-8.49-.69-15.23-7.31-15.23-15.83V24.73c0-9.11 7.67-16.78 16.77-16.17C401.92 17.18 504 124.67 504 256a246 246 0 0 1-25 108.24c-4 8.17-14.37 11-22.26 6.45l-27.84-15.9c-7.41-4.23-9.83-13.35-6.2-21.07A182.53 182.53 0 0 0 440 256c0-96.49-74.27-175.63-168.77-183.38z">
                                </path>
                            </g>
                        </svg>
                    </i>
                </button>
            </EditForm>
        }
        
    </div>
    <p class="block text-center font-grey-700 font-sm line-normal">
        Don't have an account? <a class="font-primary-700" href="/register">Sign up.</a>
    </p>
</div>