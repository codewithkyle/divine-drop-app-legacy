@page "/"
@inherits LoginBase;

@if (ViewIsReady)
{
    <div class="block mx-auto w-full max-w-mobile">
        <div class="radius-0.5 p-2 bg-white shadow-md border-1 border-solid border-grey-300 block mb-1.5">
            <h1 class="font-medium block mb-1.5 font-lg text-center">Login</h1>
            @if (@LoginForm.ErrorMessage != null)
            {
                <p class="block font-danger-700 font-sm line-normal mb-1.5 text-center">@LoginForm.ErrorMessage</p>
            }
            <EditForm Model="@LoginForm" OnValidSubmit="@LoginUser" grid="columns 1 gap-1.5"
                class="@(LoginForm.IsSubmitting ? "submitting" : "")">
                <DataAnnotationsValidator />
                <div class="input">
                    <label for="loginEmail">Email Address</label>
                    <InputText type="email" id="loginEmail" @bind-Value="@LoginForm.Email" />
                    <ValidationMessage For="@(() => LoginForm.Email)" />
                </div>
                <div class="input">
                    <label for="loginPassword">Password</label>
                    <InputText type="password" id="loginPassword" @bind-Value="@LoginForm.Password" />
                    <ValidationMessage For="@(() => LoginForm.Password)" />
                </div>
                <div class="checkbox">
                    <input type="checkbox" id="trusted-device" tabindex="0" @bind="TrustDevice" />
                    <label for="trusted-device">
                        <i>
                            <svg aria-hidden="true" focusable="false" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M435.848 83.466L172.804 346.51l-96.652-96.652c-4.686-4.686-12.284-4.686-16.971 0l-28.284 28.284c-4.686 4.686-4.686 12.284 0 16.971l133.421 133.421c4.686 4.686 12.284 4.686 16.971 0l299.813-299.813c4.686-4.686 4.686-12.284 0-16.971l-28.284-28.284c-4.686-4.686-12.284-4.686-16.97 0z"></path></svg>
                        </i>
                        <span>Trust this device</span>
                    </label>
                </div>
                <button type="submit" class="button -solid -primary block w-full" disabled="@LoginForm.IsSubmitting">
                    <span class="@(LoginForm.IsSubmitting ? "hidden" : "")">Log in</span>
                    <i class="spinning-icon @(LoginForm.IsSubmitting ? "" : "hidden")">
                        <svg aria-hidden="true" focusable="false" role="img" xmlns="http://www.w3.org/2000/svg"
                            viewBox="0 0 512 512">
                            <g class="fa-group">
                                <path class="fa-secondary" fill="currentColor"
                                    d="M478.71 364.58zm-22 6.11l-27.83-15.9a15.92 15.92 0 0 1-6.94-19.2A184 184 0 1 1 256 72c5.89 0 11.71.29 17.46.83-.74-.07-1.48-.15-2.23-.21-8.49-.69-15.23-7.31-15.23-15.83v-32a16 16 0 0 1 15.34-16C266.24 8.46 261.18 8 256 8 119 8 8 119 8 256s111 248 248 248c98 0 182.42-56.95 222.71-139.42-4.13 7.86-14.23 10.55-22 6.11z"
                                    opacity="0.4"></path>
                                <path class="fa-primary" fill="currentColor"
                                    d="M271.23 72.62c-8.49-.69-15.23-7.31-15.23-15.83V24.73c0-9.11 7.67-16.78 16.77-16.17C401.92 17.18 504 124.67 504 256a246 246 0 0 1-25 108.24c-4 8.17-14.37 11-22.26 6.45l-27.84-15.9c-7.41-4.23-9.83-13.35-6.2-21.07A182.53 182.53 0 0 0 440 256c0-96.49-74.27-175.63-168.77-183.38z">
                                </path>
                            </g>
                        </svg>
                    </i>
                </button>
            </EditForm>
        </div>
        <p class="block text-center font-grey-700 font-sm line-normal">
            Don't have an account? <a class="font-primary-700" href="/register">Sign up.</a>
            <br>
            <a class="font-primary-700" href="/forgot-password">Forgot password?</a>
        </p>
    </div>
}